<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <style>
        #video-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: auto;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div id="video-container">
        <video id="video" controls style="width: 100%; max-width: 600px;" src="https://dai.google.com/ssai/event/Syu8F41-R1y_JmQ7x0oNxQ/master.m3u8"></video>
        <div id="controls">
            <button id="cast-button">Cast</button>
            <button id="quality-button">Quality</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        const video = document.getElementById('video');
        const castButton = document.getElementById('cast-button');
        const qualityButton = document.getElementById('quality-button');

        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource('https://dai.google.com/ssai/event/Syu8F41-R1y_JmQ7x0oNxQ/master.m3u8');
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
                console.log('Manifest parsed, HLS is ready!');
            });

            // Quality adjustment
            qualityButton.addEventListener('click', () => {
                const levels = hls.levels;
                let currentLevel = hls.currentLevel;
                hls.currentLevel = (currentLevel + 1) % levels.length;
                qualityButton.textContent = `Quality: ${levels[hls.currentLevel].name}`;
            });

            // Casting functionality
            castButton.addEventListener('click', () => {
                if (navigator.presentation && navigator.presentation.receiver) {
                    navigator.presentation.receiver.requestSession()
                        .then((session) => {
                            session.load('https://dai.google.com/ssai/event/Syu8F41-R1y_JmQ7x0oNxQ/master.m3u8');
                        })
                        .catch((error) => {
                            console.error('Casting failed:', error);
                        });
                } else {
                    alert('Casting is not supported.');
                }
            });
        } else {
            console.error('HLS.js is not supported.');
        }
    </script>
</body>
</html>
